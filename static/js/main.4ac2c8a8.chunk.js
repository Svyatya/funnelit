(this.webpackJsonpfunnel=this.webpackJsonpfunnel||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),c=n(11),r=n.n(c),o=(n(80),n(81),n(82),n(31)),u=n(6),i=n(115),m=n(116),f=n(117),s=n(113),v=function(e){var t=e.max,n=e.min,a=e.value,c=e.label,r=e.onChange;return l.a.createElement("div",{className:"form__group"},l.a.createElement("label",{className:"label"},c),l.a.createElement(m.a,null,l.a.createElement(f.a,{span:20},l.a.createElement(s.a,{value:a,onChange:function(e){return r(e)},max:t,min:n})),l.a.createElement(f.a,{span:4},l.a.createElement(i.a,{min:n,max:t,value:a,onChange:function(e){isNaN(+e.target.value)||r(+e.target.value)}}))))},b=n(55),g=function(e){var t=e.label,n=e.onChange,a=e.value,c=e.clear,r=-1;return l.a.createElement("div",{className:"form__group"},l.a.createElement("label",{className:"label"},t),l.a.createElement("div",{className:"form__color"},l.a.createElement("input",{type:"color",onChange:function(e){clearTimeout(r);var t=e.target.value;r=window.setTimeout((function(){return n({hex:t})}),20)},value:a||""}),l.a.createElement("span",{className:"form__color__value"},a),c&&l.a.createElement(b.a,{onClick:function(){return n({hex:null})}},c)))},h=function(e){var t=e.style,n=t.baseHeight,c=t.baseWidth,r=t.bgPadding,o=t.itemColor,i=t.marginBetween,m=(t.lastWidth,t.innerFontSize),f=t.title,s=t.baseX,v=t.baseY,b=e.items,g=e.setEditableElement,h=e.editableElement,E=e.funnelElements,d=Object(a.useState)(null),p=Object(u.a)(d,2),x=p[0],C=p[1],j=Object(a.useState)(null),O=Object(u.a)(j,2),y=O[0],S=O[1],T=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[255,255,255]}(o);Object(a.useEffect)((function(){var e=document.getElementById("funnelCanvas");C(e.getContext("2d"))}),[]),Object(a.useEffect)((function(){!function(){if(!x)return;var e=document.getElementById("funnelCanvas");x.clearRect(0,0,e.width,e.height)}(),k()}));var k=function(){x&&b[0]&&(E.forEach((function(e,t){w(e,t),N(e,t)})),b.forEach((function(e,t){B(e,t)})),_(),I(),M(),P())},_=function(){x&&(x.font="".concat(m,"px Tahoma"),x.textAlign="center",x.fillStyle="black",x.fillText(f,s+c/2,r+m))},w=function(e,t){x&&(x.beginPath(),x.fillStyle=e.bgColor||function(e){var t=T.map((function(t){return t-Math.round(t/100*(5*e))}));return"rgb(".concat(t[0],", ").concat(t[1],", ").concat(t[2],")")}(t),x.moveTo(e.point1.x,e.point1.y),x.lineTo(e.point2.x,e.point2.y),x.lineTo(e.point3.x,e.point3.y),x.lineTo(e.point4.x,e.point4.y),x.fill())},N=function(e,t){if(x){var a=v+n*t+(n+m-4)/2;x.font="".concat(m,"px Tahoma"),x.textAlign="center",x.fillStyle=e.textColor||"black",x.fillText(e.value.toString(),s+c/2,a+i*t),e.label&&(x.textAlign="left",x.fillStyle=e.labelColor||"black",x.fillText(e.label,s+c+30,a+i*t))}},B=function(e,t){if(x&&0!==t&&e.value&&b[t-1].value){var a=v+n*t+(n+m-4)/2+i*t,l=s-20;x.font="".concat(m,"px Tahoma"),x.textAlign="start",x.fillStyle="black",x.fillText("".concat(Math.round(100/b[t-1].value*e.value)," %"),l,a)}},I=function(){if(x&&0!==b.length&&b[0].value&&b[b.length-1].value){var e=Math.round(100/b[0].value*b[b.length-1].value);x.font="".concat(m,"px Tahoma"),x.textAlign="start",x.fillStyle="black",x.fillText("".concat(e," %"),r,v+(b.length*n+i*b.length)/2);var t=x.measureText("".concat(e," %")).width,a=v+n/2,l=v+b.length*n-n/2+i*(b.length-1);x.beginPath(),x.strokeStyle="black",x.moveTo(r+t+16,a),x.lineTo(r+t+8,a),x.lineTo(r+t+8,l),x.lineTo(r+t+16,l),x.stroke()}},A=function(e,t){if(x){var n=E[e];x.beginPath(),x.strokeStyle=t,x.moveTo(n.point1.x-1,n.point1.y-1),x.lineTo(n.point2.x+1,n.point2.y-1),x.lineTo(n.point3.x+1,n.point3.y-1),x.lineTo(n.point4.x-1,n.point4.y-1),x.lineTo(n.point1.x-1,n.point1.y-1),x.stroke()}},M=function(){null!==y&&x&&A(y,"black")},P=function(){null!==h&&x&&A(h,"red")},W=function(e){var t=document.getElementById("funnelCanvas").getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},X=function(e){var t=null;return E.forEach((function(n,a){e.x>=n.point1.x&&e.x<=n.point2.x&&e.y>=n.point1.y&&e.y<=n.point3.y&&(t=a)})),t};return l.a.createElement("div",{className:"funnel-canvas__wrapper"},l.a.createElement("canvas",{id:"funnelCanvas",className:"funnel-canvas",width:c+2*r+400,height:2*r+n*b.length+50+i*b.length,onMouseMove:function(e){if(x){var t=X(W({clientX:e.clientX,clientY:e.clientY}));t!==y&&S(t)}},onClick:function(e){!y&&h&&h===y||g(y)}}))},E=function(e){var t=e.items,n=e.onChange,c=Object(a.useState)({value:0,label:""}),r=Object(u.a)(c,2),m=r[0],f=r[1],s=function(e,a){var l=Object(o.a)(t);l[a].label=e,n(l)},v=function(e,a){var l=Object(o.a)(t);l[a].value=e,n(l)};return l.a.createElement("div",{className:"data-table"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"),l.a.createElement("th",null,"\u041b\u044d\u0439\u0431\u043b"))),l.a.createElement("tbody",null,t.map((function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,l.a.createElement(i.a,{value:e.value,type:"number",onChange:function(e){return v(+e.target.value,a)}})),l.a.createElement("td",null,l.a.createElement(i.a,{value:e.label,onChange:function(e){return s(e.target.value,a)}})),l.a.createElement("td",null,l.a.createElement(b.a,{onClick:function(){return function(e){var a=Object(o.a)(t);a.splice(e,1),n(a)}(a)},danger:!0},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))})),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(i.a,{value:m.value,type:"number",onChange:function(e){return f({value:+e.target.value,label:m.label})}})),l.a.createElement("td",null,l.a.createElement(i.a,{value:m.label,onChange:function(e){return f({value:m.value,label:e.target.value})}})),l.a.createElement("td",null,l.a.createElement(b.a,{onClick:function(){var e=Object(o.a)(t);e.push(m),n(e),f({value:0,label:""})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))))},d=n(70),p=n.n(d),x=function(){var e=Object(a.useState)("funnel"),t=Object(u.a)(e,2),n=t[0],c=t[1];return l.a.createElement("div",{className:"download-funnel"},l.a.createElement(b.a,{onClick:function(){var e=document.getElementById("funnelCanvas");p.a.toPng(e).then((function(e){var t=document.createElement("a");t.href=e,t.download="".concat(n,".png"),t.click()}))}},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"),l.a.createElement(i.a,{onChange:function(e){return c(e.target.value)},value:n}))},C=n(73),j=function(e){var t=e.item,n=e.index,a=e.onChange;if(!t)return null;var c=function(e){var l=e.color,c=e.field,r=Object(C.a)({},t);r[c]=l,a(r,n)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430"),l.a.createElement(g,{label:"\u0426\u0432\u0435\u0442 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",onChange:function(e){return c({color:e.hex,field:"bgColor"})},value:t.bgColor||null,clear:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"}),l.a.createElement(g,{label:"\u0426\u0432\u0435\u0442 \u0442\u0435\u043a\u0441\u0442\u0430",onChange:function(e){return c({color:e.hex,field:"textColor"})},value:t.textColor||null,clear:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"}))},O=function(){var e=Object(a.useState)([{value:3232,label:"\u0417\u0430\u0448\u043b\u0438 \u043d\u0430 \u0441\u0430\u0439\u0442"},{value:1244,label:"\u0414\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"},{value:540,label:"\u041a\u0443\u043f\u0438\u043b\u0438"}]),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(500),m=Object(u.a)(r,2),f=m[0],s=m[1],b=Object(a.useState)(250),d=Object(u.a)(b,2),p=d[0],C=d[1],O=Object(a.useState)(60),y=Object(u.a)(O,2),S=y[0],T=y[1],k=Object(a.useState)("#fee600"),_=Object(u.a)(k,2),w=_[0],N=_[1],B=Object(a.useState)(null),I=Object(u.a)(B,2),A=I[0],M=I[1],P=Object(a.useState)(16),W=Object(u.a)(P,2),X=W[0],Y=W[1],F=Object(a.useState)(0),z=Object(u.a)(F,2),H=z[0],J=z[1],R=Object(a.useState)(20),$=Object(u.a)(R,2),q=$[0],D=$[1],G=Object(a.useState)("\u041f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u0438 \u0437\u0430 \u043d\u0435\u0434\u0435\u043b\u044e"),K=Object(u.a)(G,2),L=K[0],Q=K[1],U=Object(a.useState)(),V=Object(u.a)(U,2),Z=V[0],ee=V[1],te=Object(a.useState)(null),ne=Object(u.a)(te,2),ae=ne[0],le=ne[1],ce=X+100,re=X+(L?2*q:0),oe=(f-p)/(n.length+2);Object(a.useEffect)((function(){!function(){var e=[];n.forEach((function(t,n){var a=n*H;e.push({value:t.value,label:t.label,point1:{x:ce+oe*n+a/2,y:re+n*S+a},point2:{x:ce+(f-oe*n)-a/2,y:re+n*S+a},point3:{x:ce+(f-oe*(n+1))-a/2,y:re+S+n*S+a},point4:{x:ce+oe*(n+1)+a/2,y:re+S+n*S+a}})})),ee(e)}()}),[n,f,p,S,w,A,X,H,q,L]);return l.a.createElement("div",{className:"funnel__wrapper"},l.a.createElement("div",{className:"funnel__settings"},null!==ae&&l.a.createElement(j,{index:ae,item:Z[ae],onChange:function(e,t){var n=Object(o.a)(Z);n[t]=e,ee(n)}}),l.a.createElement("h2",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u043e\u0440\u043e\u043d\u043a\u0438"),l.a.createElement("div",{className:"form__group"},l.a.createElement("label",{className:"label"},"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),l.a.createElement(i.a,{onChange:function(e){return Q(e.target.value)},value:L,placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"})),l.a.createElement(v,{max:100,min:0,value:X,label:"\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0435 \u043e\u0442\u0441\u0442\u0443\u043f\u044b",onChange:Y}),l.a.createElement(v,{max:100,min:0,value:H,label:"\u041e\u0442\u0441\u0442\u0443\u043f\u044b \u043c\u0435\u0436\u0434\u0443 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u043c\u0438",onChange:J}),l.a.createElement(v,{max:36,min:12,value:q,label:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0442\u0435\u043a\u0441\u0442\u0430 \u0432 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u0445",onChange:D}),l.a.createElement(v,{max:1e3,min:100,value:f,label:"\u0428\u0438\u0440\u0438\u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",onChange:s}),l.a.createElement(v,{max:1e3,min:100,value:p,label:"\u0428\u0438\u0440\u0438\u043d\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",onChange:C}),l.a.createElement(v,{max:150,min:10,value:S,label:"\u0412\u044b\u0441\u043e\u0442\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",onChange:T}),l.a.createElement(g,{label:"\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0446\u0432\u0435\u0442 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",value:w,onChange:function(e){return N(e.hex)}}),l.a.createElement(g,{label:"\u0426\u0432\u0435\u0442 \u0444\u043e\u043d\u0430",value:A,onChange:function(e){return M(e.hex)},clear:"\u0423\u0431\u0440\u0430\u0442\u044c \u0444\u043e\u043d"})),l.a.createElement("div",{className:"funnel__inner"},l.a.createElement(E,{items:n,onChange:function(e){return c(e)}}),l.a.createElement(h,{items:n,style:{baseHeight:S,baseWidth:f,bgPadding:X,bgColor:A,itemColor:w,marginBetween:H,lastWidth:p,innerFontSize:q,title:L,baseX:ce,baseY:re},funnelElements:Z,setEditableElement:le,editableElement:ae}),l.a.createElement(x,null)))};var y=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,n){e.exports=n(112)},80:function(e,t,n){},82:function(e,t,n){}},[[75,1,2]]]);
//# sourceMappingURL=main.4ac2c8a8.chunk.js.map