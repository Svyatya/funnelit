(this.webpackJsonpfunnel=this.webpackJsonpfunnel||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),c=n(10),o=n.n(c),r=(n(73),n(74),n(75),n(35)),i=n(12),u=n(55),m=n.n(u),s=function(e){var t=e.items,n=e.onChange,a=function(e,a){var l=Object(r.a)(t);l[a].label=e,n(l)},c=function(e,a){var l=Object(r.a)(t);l[a].value=e,n(l)};return l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"),l.a.createElement("th",null,"\u041b\u044d\u0439\u0431\u043b"))),l.a.createElement("tbody",null,t.map((function(e,o){return l.a.createElement("tr",{key:o},l.a.createElement("td",null,l.a.createElement("input",{value:e.value,type:"number",onChange:function(e){return c(+e.target.value,o)}})),l.a.createElement("td",null,l.a.createElement("input",{value:e.label,onChange:function(e){return a(e.target.value,o)}})),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return function(e){var a=Object(r.a)(t);a.splice(e,1),n(a)}(o)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}))))},f=function(e){var t=e.style,n=t.baseHeight,c=t.baseWidth,o=t.bgPadding,r=t.itemColor,u=(t.marginBetween,t.lastWidth),m=t.innerFontSize,s=t.title,f=t.baseX,b=t.baseY,v=e.items,g=e.funnelElements,p=Object(a.useState)(null),E=Object(i.a)(p,2),h=E[0],d=E[1],x=Object(a.useState)(-1),y=Object(i.a)(x,2),j=y[0],O=y[1],C=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[255,255,255]}(r);Object(a.useEffect)((function(){var e=document.getElementById("funnelCanvas");d(e.getContext("2d"))}),[]),Object(a.useEffect)((function(){!function(){if(!h)return;var e=document.getElementById("funnelCanvas");h.clearRect(0,0,e.width,e.height)}(),_()}));var _=function(){if(h&&v[0]){var e=(c-u)/(v.length+2);g.map((function(e,t){N(e,t)})),v.map((function(t,n){T(t,n,e),k(t,n,e)})),S(),w(),B()}},S=function(){h&&(h.font="".concat(m,"px Tahoma"),h.textAlign="center",h.fillStyle="black",h.fillText(s,f+c/2,o+m))},N=function(e,t){h&&(h.beginPath(),h.fillStyle=function(e){var t=C.map((function(t){return t-Math.round(t/100*(5*e))}));return"rgb(".concat(t[0],", ").concat(t[1],", ").concat(t[2],")")}(t),h.moveTo(e.point1.x,e.point1.y),h.lineTo(e.point2.x,e.point2.y),h.lineTo(e.point3.x,e.point3.y),h.lineTo(e.point4.x,e.point4.y),h.fill())},T=function(e,t,a){if(h){var l=b+n*t+(n+m-4)/2;h.font="".concat(m,"px Tahoma"),h.textAlign="center",h.fillStyle="black",h.fillText(e.value.toString(),f+c/2,l),e.label&&(h.textAlign="left",h.fillText(e.label,f+c+30,l))}},k=function(e,t,a){if(h&&0!==t&&e.value&&v[t-1].value){var l=b+n*t+(n+m-4)/2,c=f;h.font="".concat(m,"px Tahoma"),h.textAlign="start",h.fillStyle="black",h.fillText("".concat(Math.round(100/v[t-1].value*e.value)," %"),c,l)}},w=function(){if(h&&0!==v.length&&v[0].value&&v[v.length-1].value){var e=Math.round(100/v[0].value*v[v.length-1].value);h.font="".concat(m,"px Tahoma"),h.textAlign="start",h.fillStyle="black",h.fillText("".concat(e," %"),o,b+v.length*n/2);var t=h.measureText("".concat(e," %")).width;h.beginPath(),h.fillStyle="black",h.moveTo(o+t+16,b+n/2),h.lineTo(o+t+8,b+n/2),h.lineTo(o+t+8,b+v.length*n-n/2),h.lineTo(o+t+16,b+v.length*n-n/2),h.stroke()}},B=function(){if(-1!==j&&h){var e=g[j];h.beginPath(),h.fillStyle="black",h.moveTo(e.point1.x-1,e.point1.y-1),h.lineTo(e.point2.x+1,e.point2.y-1),h.lineTo(e.point3.x+1,e.point3.y+1),h.lineTo(e.point4.x-1,e.point4.y+1),h.lineTo(e.point1.x-1,e.point1.y-1),h.stroke()}},I=function(e){var t=document.getElementById("funnelCanvas").getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},A=function(e){var t=-1;return g.forEach((function(n,a){e.x>=n.point1.x&&e.x<=n.point2.x&&e.y>=n.point1.y&&e.y<=n.point3.y&&(t=a)})),t};return l.a.createElement("div",{className:"funnel-canvas__wrapper"},l.a.createElement("canvas",{id:"funnelCanvas",className:"funnel-canvas",width:c+2*o+400,height:2*o+n*v.length+50,onMouseMove:function(e){if(h){var t=A(I({clientX:e.clientX,clientY:e.clientY}));t!=j&&O(t)}}}))},b=n(108),v=n(107),g=function(){var e=Object(a.useState)([{value:3232,label:"\u0417\u0430\u0448\u043b\u0438 \u043d\u0430 \u0441\u0430\u0439\u0442"},{value:1244,label:"\u0414\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"},{value:540,label:"\u041a\u0443\u043f\u0438\u043b\u0438"}]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(0),u=Object(i.a)(o,2),g=u[0],p=u[1],E=Object(a.useState)(500),h=Object(i.a)(E,2),d=h[0],x=h[1],y=Object(a.useState)(250),j=Object(i.a)(y,2),O=j[0],C=j[1],_=Object(a.useState)(60),S=Object(i.a)(_,2),N=S[0],T=S[1],k=Object(a.useState)("#fee600"),w=Object(i.a)(k,2),B=w[0],I=w[1],A=Object(a.useState)("transparent"),M=Object(i.a)(A,2),P=M[0],W=M[1],X=Object(a.useState)(16),Y=Object(i.a)(X,2),z=Y[0],F=Y[1],H=Object(a.useState)(0),J=Object(i.a)(H,2),R=J[0],$=J[1],q=Object(a.useState)(20),D=Object(i.a)(q,2),G=D[0],K=D[1],L=Object(a.useState)("\u041f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u0438 \u0437\u0430 \u043d\u0435\u0434\u0435\u043b\u044e"),Q=Object(i.a)(L,2),U=Q[0],V=Q[1],Z=Object(a.useState)(),ee=Object(i.a)(Z,2),te=ee[0],ne=ee[1],ae=z+80,le=z+(U?G+z:0),ce=(d-O)/(n.length+2);Object(a.useEffect)((function(){!function(){var e=[];n.forEach((function(t,n){e.push({value:t.value,label:t.label,point1:{x:ae+ce*n,y:le+n*N+n*R},point2:{x:ae+(d-ce*n),y:le+n*N+n*R},point3:{x:ae+(d-ce*(n+1)),y:le+N+n*N+n*R},point4:{x:ae+ce*(n+1),y:le+N+n*N+n*R}})})),ne(e)}()}),[n,g,d,O,N,B,P,z,R,G,U]);return l.a.createElement("div",{className:"funnel__wrapper"},l.a.createElement("div",{className:"funnel__settings"},l.a.createElement("div",{className:"form__group"},l.a.createElement("label",{className:"label"},"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),l.a.createElement(b.a,{onChange:function(e){return V(e.target.value)},value:U,placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"})),l.a.createElement("div",{className:"form__group"},l.a.createElement("label",{className:"label"},"\u0426\u0432\u0435\u0442 \u0444\u043e\u043d\u0430"),l.a.createElement("input",{type:"color",onChange:function(e){return W(e.target.value)},value:P}),l.a.createElement("button",{onClick:function(){return W("transparent")}},"\u0423\u0431\u0440\u0430\u0442\u044c \u0444\u043e\u043d")),l.a.createElement("div",{className:"form__group"},l.a.createElement("label",{className:"label"},"\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0435 \u043e\u0442\u0441\u0442\u0443\u043f\u044b"),l.a.createElement(v.a,{value:z,onChange:function(e){return F(e)},max:100,min:0})),l.a.createElement("div",{className:"form__group"},l.a.createElement("label",{className:"label"},"\u041e\u0442\u0441\u0442\u0443\u043f\u044b \u043c\u0435\u0436\u0434\u0443 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u043c\u0438"),l.a.createElement(v.a,{value:R,onChange:function(e){return $(e)},max:100,min:0})),l.a.createElement("div",{className:"form__group"},l.a.createElement("label",{className:"label"},"\u0420\u0430\u0437\u043c\u0435\u0440 \u0442\u0435\u043a\u0441\u0442\u0430 \u0432 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u0445"),l.a.createElement(v.a,{value:G,onChange:function(e){return K(e)},max:36,min:12})),l.a.createElement("div",{className:"form__group"},l.a.createElement("label",{className:"label"},"\u0426\u0432\u0435\u0442 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432"),l.a.createElement("input",{type:"color",onChange:function(e){return I(e.target.value)},value:B})),l.a.createElement("div",{className:"form__group"},l.a.createElement("label",{className:"label"},"\u0428\u0438\u0440\u0438\u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430"),l.a.createElement(v.a,{value:d,onChange:function(e){return x(e)},max:1e3,min:100})),l.a.createElement("div",{className:"form__group"},l.a.createElement("label",{className:"label"},"\u0428\u0438\u0440\u0438\u043d\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430"),l.a.createElement(v.a,{value:O,onChange:function(e){return C(e)},max:1e3,min:100})),l.a.createElement("div",{className:"form__group"},l.a.createElement("label",{className:"label"},"\u0412\u044b\u0441\u043e\u0442\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432"),l.a.createElement(v.a,{value:N,onChange:function(e){return T(e)},max:150,min:10}))),l.a.createElement("div",{className:"funnel__inner"},l.a.createElement("div",null,l.a.createElement("input",{onChange:function(e){return p(+e.target.value)},type:"tel",value:g}),l.a.createElement("button",{onClick:function(){n.length>0&&n[n.length-1].value<g||(c([].concat(Object(r.a)(n),[{value:g}])),p(0))}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),l.a.createElement("button",{onClick:function(){var e=document.getElementById("funnel-svg");m.a.toPng(e).then((function(e){var t=new Image;t.src=e,document.body.appendChild(t)}))}},"\u0412\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c")),l.a.createElement(s,{items:n,onChange:function(e){return c(e)}}),l.a.createElement(f,{items:n,style:{baseHeight:N,baseWidth:d,bgPadding:z,bgColor:P,itemColor:B,marginBetween:R,lastWidth:O,innerFontSize:G,title:U,baseX:ae,baseY:le},funnelElements:te})))};var p=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(g,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,t,n){e.exports=n(105)},73:function(e,t,n){},75:function(e,t,n){}},[[68,1,2]]]);
//# sourceMappingURL=main.bce014db.chunk.js.map