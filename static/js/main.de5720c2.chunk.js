(this.webpackJsonpfunnel=this.webpackJsonpfunnel||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),c=n(6),u=n.n(c),r=(n(13),n(14),n(2)),i=n(1),o=n(7),m=n.n(o),f=function(e){var t=e.items,n=e.onChange,a=function(e,a){var l=Object(r.a)(t);l[a].label=e,n(l)},c=function(e,a){var l=Object(r.a)(t);l[a].value=e,n(l)};return l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"),l.a.createElement("th",null,"\u041b\u044d\u0439\u0431\u043b"))),l.a.createElement("tbody",null,t.map((function(e,u){return l.a.createElement("tr",{key:u},l.a.createElement("td",null,l.a.createElement("input",{value:e.value,type:"number",onChange:function(e){return c(+e.target.value,u)}})),l.a.createElement("td",null,l.a.createElement("input",{value:e.label,onChange:function(e){return a(e.target.value,u)}})),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return function(e){var a=Object(r.a)(t);a.splice(e,1),n(a)}(u)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}))))},v=function(e){var t=e.style,n=t.baseHeight,c=t.baseWidth,u=t.bgPadding,r=t.itemColor,o=(t.marginBetween,t.lastWidth),m=t.innerFontSize,f=t.title,v=t.baseX,b=t.baseY,s=e.items,g=e.funnelElements,p=Object(a.useState)(null),E=Object(i.a)(p,2),h=E[0],d=E[1],y=Object(a.useState)(-1),x=Object(i.a)(y,2),j=x[0],O=x[1],C=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[255,255,255]}(r);Object(a.useEffect)((function(){var e=document.getElementById("funnelCanvas");d(e.getContext("2d"))}),[]),Object(a.useEffect)((function(){!function(){if(!h)return;var e=document.getElementById("funnelCanvas");h.clearRect(0,0,e.width,e.height)}(),S()}));var S=function(){if(h&&s[0]){var e=(c-o)/(s.length+2);console.log(g),g.map((function(e,t){k(e,t)})),s.map((function(t,n){w(t,n,e),N(t,n,e)})),T(),B(),I()}},T=function(){h&&(console.log(321),h.font="".concat(m,"px Tahoma"),h.textAlign="center",h.fillStyle="black",h.fillText(f,v+c/2,u+m))},k=function(e,t){h&&(console.log(123),h.beginPath(),h.fillStyle=function(e){var t=C.map((function(t){return t-Math.round(t/100*(5*e))}));return"rgb(".concat(t[0],", ").concat(t[1],", ").concat(t[2],")")}(t),h.moveTo(e.point1.x,e.point1.y),h.lineTo(e.point2.x,e.point2.y),h.lineTo(e.point3.x,e.point3.y),h.lineTo(e.point4.x,e.point4.y),h.fill())},w=function(e,t,a){if(h){var l=b+n*t+(n+m-4)/2;h.font="".concat(m,"px Tahoma"),h.textAlign="center",h.fillStyle="black",h.fillText(e.value.toString(),v+c/2,l),e.label&&(h.textAlign="left",h.fillText(e.label,v+c+30,l))}},N=function(e,t,a){if(h&&0!==t&&e.value&&s[t-1].value){var l=b+n*t+(n+m-4)/2,c=v;h.font="".concat(m,"px Tahoma"),h.textAlign="start",h.fillStyle="black",h.fillText("".concat(Math.round(100/s[t-1].value*e.value)," %"),c,l)}},B=function(){if(h&&0!==s.length&&s[0].value&&s[s.length-1].value){var e=Math.round(100/s[0].value*s[s.length-1].value);h.font="".concat(m,"px Tahoma"),h.textAlign="start",h.fillStyle="black",h.fillText("".concat(e," %"),u,b+s.length*n/2);var t=h.measureText("".concat(e," %")).width;h.beginPath(),h.fillStyle="black",h.moveTo(u+t+16,b+n/2),h.lineTo(u+t+8,b+n/2),h.lineTo(u+t+8,b+s.length*n-n/2),h.lineTo(u+t+16,b+s.length*n-n/2),h.stroke()}},I=function(){if(-1!==j&&h){var e=g[j];h.beginPath(),h.fillStyle="black",h.moveTo(e.point1.x-1,e.point1.y-1),h.lineTo(e.point2.x+1,e.point2.y-1),h.lineTo(e.point3.x+1,e.point3.y+1),h.lineTo(e.point4.x-1,e.point4.y+1),h.lineTo(e.point1.x-1,e.point1.y-1),h.stroke()}},_=function(e){var t=document.getElementById("funnelCanvas").getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},A=function(e){var t=-1;return g.forEach((function(n,a){e.x>=n.point1.x&&e.x<=n.point2.x&&e.y>=n.point1.y&&e.y<=n.point3.y&&(t=a)})),t};return l.a.createElement("div",null,l.a.createElement("canvas",{id:"funnelCanvas",width:c+2*u+400,height:2*u+n*s.length+50,onMouseMove:function(e){if(h){var t=A(_({clientX:e.clientX,clientY:e.clientY}));t!=j&&O(t)}}}))},b=function(){var e=Object(a.useState)([{value:3720,label:"\u0423\u0432\u0438\u0434\u0435\u043b\u0438 \u0444\u043e\u0440\u043c\u0443"},{value:772,label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"},{value:644,label:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u043b\u0438 50%"},{value:476,label:"\u0414\u043e\u0448\u043b\u0438 \u0434\u043e \u043a\u043e\u043d\u0446\u0430"}]),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(0),o=Object(i.a)(u,2),b=o[0],s=o[1],g=Object(a.useState)(500),p=Object(i.a)(g,2),E=p[0],h=p[1],d=Object(a.useState)(250),y=Object(i.a)(d,2),x=y[0],j=y[1],O=Object(a.useState)(60),C=Object(i.a)(O,2),S=C[0],T=C[1],k=Object(a.useState)("#fee600"),w=Object(i.a)(k,2),N=w[0],B=w[1],I=Object(a.useState)("transparent"),_=Object(i.a)(I,2),A=_[0],M=_[1],P=Object(a.useState)(16),W=Object(i.a)(P,2),X=W[0],Y=W[1],z=Object(a.useState)(0),F=Object(i.a)(z,2),H=F[0],J=F[1],R=Object(a.useState)(20),$=Object(i.a)(R,2),q=$[0],D=$[1],G=Object(a.useState)("\u041f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u0438 \u0437\u0430 \u043d\u0435\u0434\u0435\u043b\u044e"),K=Object(i.a)(G,2),L=K[0],Q=K[1],U=Object(a.useState)(),V=Object(i.a)(U,2),Z=V[0],ee=V[1],te=X+80,ne=X+(L?q+X:0),ae=(E-x)/(n.length+2);Object(a.useEffect)((function(){!function(){var e=[];n.forEach((function(t,n){e.push({value:t.value,label:t.label,point1:{x:te+ae*n,y:ne+n*S+n*H},point2:{x:te+(E-ae*n),y:ne+n*S+n*H},point3:{x:te+(E-ae*(n+1)),y:ne+S+n*S+n*H},point4:{x:te+ae*(n+1),y:ne+S+n*S+n*H}})})),ee(e)}()}),[n,b,E,x,S,N,A,X,H,q,L]);return l.a.createElement("div",{className:"funnel__wrapper"},l.a.createElement("div",{className:"funnel__settings"},l.a.createElement("div",null,l.a.createElement("label",null,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),l.a.createElement("input",{onChange:function(e){return Q(e.target.value)},value:L})),l.a.createElement("div",null,l.a.createElement("label",null,"\u0426\u0432\u0435\u0442 \u0444\u043e\u043d\u0430"),l.a.createElement("input",{type:"color",onChange:function(e){return M(e.target.value)},value:A}),l.a.createElement("button",{onClick:function(){return M("transparent")}},"\u0423\u0431\u0440\u0430\u0442\u044c \u0444\u043e\u043d")),l.a.createElement("div",null,l.a.createElement("label",null,"\u041e\u0442\u0441\u0442\u0443\u043f\u044b \u043e\u0442 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432"),l.a.createElement("input",{value:X,onChange:function(e){return Y(Number(e.target.value))},type:"range",max:"100",min:"0"})),l.a.createElement("div",null,l.a.createElement("label",null,"\u041e\u0442\u0441\u0442\u0443\u043f\u044b \u043c\u0435\u0436\u0434\u0443 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u043c\u0438"),l.a.createElement("input",{value:H,onChange:function(e){return J(Number(e.target.value))},type:"range",max:"100",min:"0"})),l.a.createElement("div",null,l.a.createElement("label",null,"\u0420\u0430\u0437\u043c\u0435\u0440 \u0442\u0435\u043a\u0441\u0442\u0430 \u0432 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u0445"),l.a.createElement("input",{value:q,onChange:function(e){return D(Number(e.target.value))},type:"range",max:"36",min:"12"})),l.a.createElement("div",null,l.a.createElement("label",null,"\u0426\u0432\u0435\u0442 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432"),l.a.createElement("input",{type:"color",onChange:function(e){return B(e.target.value)},value:N})),l.a.createElement("div",null,l.a.createElement("label",null,"\u0428\u0438\u0440\u0438\u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430"),l.a.createElement("input",{value:E,onChange:function(e){return h(Number(e.target.value))},type:"range",max:"1000",min:"100"})),l.a.createElement("div",null,l.a.createElement("label",null,"\u0428\u0438\u0440\u0438\u043d\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430"),l.a.createElement("input",{value:x,onChange:function(e){return j(Number(e.target.value))},type:"range",max:"1000",min:"100"})),l.a.createElement("div",null,l.a.createElement("label",null,"\u0412\u044b\u0441\u043e\u0442\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432"),l.a.createElement("input",{value:S,onChange:function(e){return T(Number(e.target.value))},type:"range"}))),l.a.createElement("div",{className:"funnel__inner"},l.a.createElement("div",{className:"funnel__settings"},l.a.createElement("input",{onChange:function(e){return s(+e.target.value)},type:"tel",value:b}),l.a.createElement("button",{onClick:function(){n.length>0&&n[n.length-1].value<b||(c([].concat(Object(r.a)(n),[{value:b}])),s(0))}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),l.a.createElement("button",{onClick:function(){var e=document.getElementById("funnel-svg");m.a.toPng(e).then((function(e){var t=new Image;t.src=e,document.body.appendChild(t)}))}},"\u0412\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c")),l.a.createElement(f,{items:n,onChange:function(e){return c(e)}}),l.a.createElement(v,{items:n,style:{baseHeight:S,baseWidth:E,bgPadding:X,bgColor:A,itemColor:N,marginBetween:H,lastWidth:x,innerFontSize:q,title:L,baseX:te,baseY:ne},funnelElements:Z})))};var s=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(s,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.de5720c2.chunk.js.map